kind: ConfigMap
apiVersion: v1
metadata:
  name: clusters-overview
  namespace: open-cluster-management-observability
  annotations:
    observability.open-cluster-management.io/dashboard-folder: NetObserv
  labels:
    grafana-custom-dashboard: "true"
data:
  clusters-overview.json: |
    {"annotations": {"list": [{"builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "gnetId": null, "graphTooltip": 0, "id": 34, "iteration": 1700038170716, "links": [], "panels": [{"collapsed": false, "datasource": "$datasource", "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0}, "id": 2, "panels": [], "title": "Networking", "type": "row"}, {"cacheTimeout": null, "datasource": "$datasource", "fieldConfig": {"defaults": {"color": {"fixedColor": "rgb(255, 255, 255)", "mode": "fixed"}, "mappings": [{"options": {"match": "null", "result": {"text": "N/A"}}, "type": "special"}], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "Bps"}, "overrides": []}, "gridPos": {"h": 12, "w": 2, "x": 0, "y": 1}, "id": 6, "interval": null, "links": [], "maxDataPoints": 100, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "avg(sum(namespace:netobserv_workload_ingress_bytes_total:dst:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Average", "refId": "B"}, {"exemplar": true, "expr": "min(sum(namespace:netobserv_workload_ingress_bytes_total:dst:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Min", "refId": "C"}, {"exemplar": true, "expr": "max(sum(namespace:netobserv_workload_ingress_bytes_total:dst:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Max", "refId": "D"}, {"exemplar": true, "expr": "sum(namespace:netobserv_workload_ingress_bytes_total:dst:rate5m{cluster=~\"$cluster\"})", "format": "time_series", "instant": true, "interval": "", "intervalFactor": 1, "legendFormat": "Total", "refId": "A"}], "timeFrom": null, "timeShift": null, "title": "Incoming rates", "type": "stat"}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "$datasource", "fieldConfig": {"defaults": {"links": [], "unit": "Bps"}, "overrides": []}, "fill": 8, "fillGradient": 5, "gridPos": {"h": 12, "w": 10, "x": 2, "y": 1}, "hiddenSeries": false, "id": 16, "interval": "", "legend": {"alignAsTable": true, "avg": false, "current": false, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "total": false, "values": false}, "lines": true, "linewidth": 2, "nullPointMode": "null as zero", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.5.20", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "topk(10,sum(namespace:netobserv_workload_ingress_bytes_total:dst:rate5m{cluster=~\"$cluster\"}) by (cluster))", "interval": "", "legendFormat": "{{cluster}} ", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Top 10 clusters incoming traffic", "tooltip": {"shared": false, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:442", "format": "Bps", "label": null, "logBase": 1, "max": null, "min": null, "show": true}, {"$$hashKey": "object:443", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"cacheTimeout": null, "datasource": "$datasource", "fieldConfig": {"defaults": {"color": {"fixedColor": "rgb(255, 255, 255)", "mode": "fixed"}, "mappings": [{"options": {"match": "null", "result": {"text": "N/A"}}, "type": "special"}], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "Bps"}, "overrides": []}, "gridPos": {"h": 12, "w": 2, "x": 12, "y": 1}, "id": 37, "interval": null, "links": [], "maxDataPoints": 100, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "avg(sum(namespace:netobserv_workload_egress_bytes_total:src:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Average", "refId": "B"}, {"exemplar": true, "expr": "min(sum(namespace:netobserv_workload_egress_bytes_total:src:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Min", "refId": "C"}, {"exemplar": true, "expr": "max(sum(namespace:netobserv_workload_egress_bytes_total:src:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Max", "refId": "D"}, {"exemplar": true, "expr": "sum(namespace:netobserv_workload_egress_bytes_total:src:rate5m{cluster=~\"$cluster\"})", "format": "time_series", "instant": true, "interval": "", "intervalFactor": 1, "legendFormat": "Total", "refId": "A"}], "timeFrom": null, "timeShift": null, "title": "Outgoing rates", "type": "stat"}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "$datasource", "fieldConfig": {"defaults": {"links": [], "unit": "Bps"}, "overrides": []}, "fill": 8, "fillGradient": 5, "gridPos": {"h": 12, "w": 10, "x": 14, "y": 1}, "hiddenSeries": false, "id": 35, "interval": "", "legend": {"alignAsTable": true, "avg": false, "current": false, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "total": false, "values": false}, "lines": true, "linewidth": 2, "nullPointMode": "null as zero", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.5.20", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "topk(10,sum(namespace:netobserv_workload_egress_bytes_total:src:rate5m{cluster=~\"$cluster\"}) by (cluster))", "interval": "", "legendFormat": "{{cluster}} ", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Top 10 clusters outgoing traffic", "tooltip": {"shared": false, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"format": "Bps", "label": null, "logBase": 1, "max": null, "min": null, "show": true}, {"format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"datasource": "$datasource", "description": "", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": null, "displayMode": "auto", "filterable": false}, "links": [], "mappings": [], "noValue": "-", "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Value #C"}, "properties": [{"id": "displayName", "value": "% of total outgoing traffic"}, {"id": "unit", "value": "percentunit"}, {"id": "decimals", "value": 2}, {"id": "custom.align", "value": "left"}]}, {"matcher": {"id": "byName", "options": "Value #E"}, "properties": [{"id": "displayName", "value": "% of total incoming traffic"}, {"id": "unit", "value": "percentunit"}, {"id": "decimals", "value": 2}, {"id": "custom.align", "value": "left"}]}, {"matcher": {"id": "byName", "options": "cluster"}, "properties": [{"id": "links", "value": [{"title": "", "url": "/d/146b974ac1c6396de3e23f1d4e2119cb/per-cluster?${__url_time_range}&var-cluster=${__data.fields.cluster}"}]}]}]}, "gridPos": {"h": 9, "w": 24, "x": 0, "y": 13}, "id": 26, "interval": "4m", "links": [], "options": {"showHeader": true, "sortBy": [{"desc": true, "displayName": "% of incoming traffic"}]}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "topk(15,sum(namespace:netobserv_workload_ingress_bytes_total:dst:rate5m{cluster=~\"$cluster\"}) by (cluster,namespace) / ignoring(cluster,namespace) group_left sum(namespace:netobserv_workload_ingress_bytes_total:dst:rate5m{cluster=~\"$cluster\"}))", "format": "table", "instant": true, "interval": "", "intervalFactor": 1, "legendFormat": "", "refId": "E", "step": 10}, {"exemplar": true, "expr": "topk(15,sum(namespace:netobserv_workload_egress_bytes_total:src:rate5m{cluster=~\"$cluster\"}) by (cluster,namespace) / ignoring(cluster,namespace) group_left sum(namespace:netobserv_workload_egress_bytes_total:src:rate5m{cluster=~\"$cluster\"}))", "format": "table", "instant": true, "interval": "", "intervalFactor": 1, "legendFormat": "", "refId": "C", "step": 10}], "timeFrom": null, "timeShift": null, "title": "Top Namespaces", "transformations": [{"id": "filterFieldsByName", "options": {"include": {"names": ["cluster", "namespace", "Value #B", "Value #E", "Value #C"]}}}, {"id": "merge", "options": {}}, {"id": "sortBy", "options": {"fields": {}, "sort": [{"desc": true, "field": "Value #E"}]}}], "type": "table"}, {"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 22}, "id": 39, "panels": [], "title": "Cross-Cluster Traffic (cluster-ingress / cluster-egress)", "type": "row"}, {"cacheTimeout": null, "datasource": "$datasource", "fieldConfig": {"defaults": {"color": {"fixedColor": "rgb(255, 255, 255)", "mode": "fixed"}, "mappings": [{"options": {"match": "null", "result": {"text": "N/A"}}, "type": "special"}], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "Bps"}, "overrides": []}, "gridPos": {"h": 12, "w": 2, "x": 0, "y": 23}, "id": 40, "interval": null, "links": [], "maxDataPoints": 100, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "avg(sum(namespace:netobserv_workload_ingress_bytes_total:dst:unknown_src:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Average", "refId": "B"}, {"exemplar": true, "expr": "min(sum(namespace:netobserv_workload_ingress_bytes_total:dst:unknown_src:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Min", "refId": "C"}, {"exemplar": true, "expr": "max(sum(namespace:netobserv_workload_ingress_bytes_total:dst:unknown_src:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Max", "refId": "D"}, {"exemplar": true, "expr": "sum(namespace:netobserv_workload_ingress_bytes_total:dst:unknown_src:rate5m{cluster=~\"$cluster\"})", "format": "time_series", "instant": true, "interval": "", "intervalFactor": 1, "legendFormat": "Total", "refId": "A"}], "timeFrom": null, "timeShift": null, "title": "Incoming rates", "type": "stat"}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "$datasource", "fieldConfig": {"defaults": {"links": [], "unit": "Bps"}, "overrides": []}, "fill": 8, "fillGradient": 5, "gridPos": {"h": 12, "w": 10, "x": 2, "y": 23}, "hiddenSeries": false, "id": 41, "interval": "", "legend": {"alignAsTable": true, "avg": false, "current": false, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "total": false, "values": false}, "lines": true, "linewidth": 2, "nullPointMode": "null as zero", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.5.20", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "topk(10,sum(namespace:netobserv_workload_ingress_bytes_total:dst:unknown_src:rate5m{cluster=~\"$cluster\"}) by (cluster))", "interval": "", "legendFormat": "{{cluster}} ", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Top 10 clusters incoming traffic", "tooltip": {"shared": false, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:442", "format": "Bps", "label": null, "logBase": 1, "max": null, "min": null, "show": true}, {"$$hashKey": "object:443", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"cacheTimeout": null, "datasource": "$datasource", "fieldConfig": {"defaults": {"color": {"fixedColor": "rgb(255, 255, 255)", "mode": "fixed"}, "mappings": [{"options": {"match": "null", "result": {"text": "N/A"}}, "type": "special"}], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "Bps"}, "overrides": []}, "gridPos": {"h": 12, "w": 2, "x": 12, "y": 23}, "id": 42, "interval": null, "links": [], "maxDataPoints": 100, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "avg(sum(namespace:netobserv_workload_egress_bytes_total:src:unknown_dst:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Average", "refId": "B"}, {"exemplar": true, "expr": "min(sum(namespace:netobserv_workload_egress_bytes_total:src:unknown_dst:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Min", "refId": "C"}, {"exemplar": true, "expr": "max(sum(namespace:netobserv_workload_egress_bytes_total:src:unknown_dst:rate5m{cluster=~\"$cluster\"}) by (cluster))", "hide": false, "interval": "", "legendFormat": "Max", "refId": "D"}, {"exemplar": true, "expr": "sum(namespace:netobserv_workload_egress_bytes_total:src:unknown_dst:rate5m{cluster=~\"$cluster\"})", "format": "time_series", "instant": true, "interval": "", "intervalFactor": 1, "legendFormat": "Total", "refId": "A"}], "timeFrom": null, "timeShift": null, "title": "Outgoing rates", "type": "stat"}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "$datasource", "fieldConfig": {"defaults": {"links": [], "unit": "Bps"}, "overrides": []}, "fill": 8, "fillGradient": 5, "gridPos": {"h": 12, "w": 10, "x": 14, "y": 23}, "hiddenSeries": false, "id": 43, "interval": "", "legend": {"alignAsTable": true, "avg": false, "current": false, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "total": false, "values": false}, "lines": true, "linewidth": 2, "nullPointMode": "null as zero", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.5.20", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "topk(10,sum(namespace:netobserv_workload_egress_bytes_total:src:unknown_dst:rate5m{cluster=~\"$cluster\"}) by (cluster))", "interval": "", "legendFormat": "{{cluster}} ", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Top 10 clusters outgoing traffic", "tooltip": {"shared": false, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"format": "Bps", "label": null, "logBase": 1, "max": null, "min": null, "show": true}, {"format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}], "refresh": "5m", "schemaVersion": 30, "style": "dark", "tags": [], "templating": {"list": [{"current": {"selected": false, "text": "Observatorium", "value": "Observatorium"}, "description": null, "error": null, "hide": 2, "includeAll": false, "label": null, "multi": false, "name": "datasource", "options": [], "query": "prometheus", "queryValue": "", "refresh": 2, "regex": "", "skipUrlSync": false, "type": "datasource"}, {"allValue": null, "current": {"selected": false, "text": "cloud", "value": "cloud"}, "datasource": null, "definition": "label_values(acm_label_names, label_name)", "description": null, "error": null, "hide": 0, "includeAll": false, "label": "Label", "multi": false, "name": "acm_label_names", "options": [], "query": {"query": "label_values(acm_label_names, label_name)", "refId": "StandardVariableQuery"}, "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 1, "type": "query"}, {"allValue": null, "current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "datasource": null, "definition": "label_values(acm_managed_cluster_labels, $acm_label_names)", "description": null, "error": null, "hide": 0, "includeAll": true, "label": "Value", "multi": true, "name": "value", "options": [], "query": {"query": "label_values(acm_managed_cluster_labels, $acm_label_names)", "refId": "StandardVariableQuery"}, "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query"}, {"allValue": null, "current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "datasource": null, "definition": "label_values(acm_managed_cluster_labels{$acm_label_names=~\"$value\"}, name)", "description": null, "error": null, "hide": 2, "includeAll": true, "label": "Cluster", "multi": true, "name": "cluster", "options": [], "query": {"query": "label_values(acm_managed_cluster_labels{$acm_label_names=~\"$value\"}, name)", "refId": "StandardVariableQuery"}, "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query"}]}, "time": {"from": "now-1h", "to": "now"}, "timepicker": {"refresh_intervals": ["1m", "5m", "15m", "30m", "1h", "2h", "1d"]}, "timezone": "browser", "title": "Clusters Overview", "version": 3}
